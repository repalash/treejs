!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports.Tree=t():e.Tree=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(1)),o=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,s=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,s=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){var t={};return e.reduce(function(e,n){return t[n]||(t[n]=!0,e.push(n)),e},[])}function l(e,t){requestAnimationFrame(function(){t.enter(),requestAnimationFrame(function(){t.active(),setTimeout(function(){t.leave()},e)})})}var c=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o.default.use({target:t});this.treeNodes=[],this.nodesById={},this.leafNodesById={},this.liElementsById={},this.willUpdateNodesById={},this.container=t,this.options=Object.assign({selectMode:"checkbox",values:[],disables:[],beforeLoad:null,loaded:null,url:null,method:"GET",closeDepth:null},n),Object.defineProperties(this,{values:{get:function(){return this.getValues()},set:function(e){return this.setValues(d(e))}},disables:{get:function(){return this.getDisables()},set:function(e){return this.setDisables(d(e))}},selectedNodes:{get:function(){var e=[],t=this.nodesById;return Object.keys(t).forEach(function(n){if(Object.prototype.hasOwnProperty.call(t,n)&&(1===t[n].status||2===t[n].status)){var r=Object.assign({},t[n]);delete r.parent,delete r.children,e.push(r)}}),e}},disabledNodes:{get:function(){var e=[],t=this.nodesById;return Object.keys(t).forEach(function(n){if(Object.prototype.hasOwnProperty.call(t,n)&&t[n].disabled){var r=Object.assign({},t[n]);delete r.parent,e.push(r)}}),e}}}),this.options.url?this.load(function(e){r.init(e)}):this.init(this.options.data)}var t,n,s;return t=e,s=[{key:"onSwitcherClick",value:function(e){var t=e.parentNode,n=t.lastChild,r=n.scrollHeight;t.classList.contains("treejs-node__close")?l(150,{enter:function(){n.style.height=0,n.style.opacity=0},active:function(){n.style.height="".concat(r,"px"),n.style.opacity=1},leave:function(){n.style.height="",n.style.opacity="",t.classList.remove("treejs-node__close")}}):l(150,{enter:function(){n.style.height="".concat(r,"px"),n.style.opacity=1},active:function(){n.style.height=0,n.style.opacity=0},leave:function(){n.style.height="",n.style.opacity="",t.classList.add("treejs-node__close")}})}},{key:"parseTreeData",value:function(e){var t,n=(t=e,JSON.parse(JSON.stringify(t))),r={},o={},s=[],i=[];return function e(t,n){t.forEach(function(t){r[t.id]=t,t.checked&&s.push(t.id),t.disabled&&i.push(t.id),n&&(t.parent=n),t.children&&t.children.length?e(t.children,t):o[t.id]=t})}(n),{treeNodes:n,nodesById:r,leafNodesById:o,defaultValues:s,defaultDisables:i}}},{key:"createRootEle",value:function(){var e=document.createElement("div");return e.classList.add("treejs"),e}},{key:"createUlEle",value:function(){var e=document.createElement("ul");return e.classList.add("treejs-nodes"),e}},{key:"createLiEle",value:function(e,t){var n=document.createElement("li");if(n.classList.add("treejs-node"),t&&n.classList.add("treejs-node__close"),e.children&&e.children.length){var r=document.createElement("span");r.classList.add("treejs-switcher"),n.appendChild(r)}else n.classList.add("treejs-placeholder");var o=document.createElement("span");o.classList.add("treejs-checkbox"),n.appendChild(o);var s=document.createElement("span");s.classList.add("treejs-label");var i=document.createTextNode(e.text);return s.appendChild(i),n.appendChild(s),n.nodeId=e.id,n}}],(n=[{key:"init",value:function(t){var n=e.parseTreeData(t),r=n.treeNodes,o=n.nodesById,s=n.leafNodesById,i=n.defaultValues,a=n.defaultDisables;this.treeNodes=r,this.nodesById=o,this.leafNodesById=s,this.render(this.treeNodes);var d=this.options,l=d.values,c=d.disables,u=d.loaded;l&&l.length?this.setValues(l):i&&i.length&&this.setValues(i),c&&c.length?this.setDisables(c):a&&a.length&&this.setDisables(a),"function"===typeof u&&u.call(this)}},{key:"load",value:function(e){var t=this.options,n=t.url,o=t.method,s=t.beforeLoad;(0,r.default)({url:n,method:o,success:function(t){var n=t;s&&(n=s(t)),e(n)}})}},{key:"render",value:function(t){var n=e.createRootEle();n.appendChild(this.buildTree(t,0)),this.bindEvent(n);var r=document.querySelector(this.container);!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(r),r.appendChild(n)}},{key:"buildTree",value:function(t,n){var r=this,o=e.createUlEle();return t&&t.length&&t.forEach(function(t){var s=e.createLiEle(t,n===r.options.closeDepth-1);r.liElementsById[t.id]=s;var i=null;t.children&&t.children.length&&(i=r.buildTree(t.children,n+1)),i&&s.appendChild(i),o.appendChild(s)}),o}},{key:"bindEvent",value:function(t){var n=this;t.addEventListener("click",function(t){var r=t.target;"SPAN"===r.nodeName&&r.classList.contains("treejs-checkbox")?n.onItemClick(r.parentNode.nodeId):"SPAN"===r.nodeName&&r.classList.contains("treejs-label")?n.onItemLabelClick(r.parentNode.nodeId):"LI"===r.nodeName&&r.classList.contains("treejs-node")?n.onItemClick(r.nodeId):"SPAN"===r.nodeName&&r.classList.contains("treejs-switcher")&&e.onSwitcherClick(r)},!1)}},{key:"onItemClick",value:function(e){var t=this.nodesById[e],n=this.options.onChange;t.disabled||(this.setValue(e),this.updateLiElements()),n&&n.call(this)}},{key:"onItemLabelClick",value:function(e){var t=this.options.onItemLabelClick;t&&t.call(this,e)}},{key:"setValue",value:function(e){var t=this.nodesById[e];if(t){var n=t.status,r=1===n||2===n?0:2;t.status=r,this.markWillUpdateNode(t),this.walkUp(t,"status"),this.walkDown(t,"status")}}},{key:"getValues",value:function(){var e=this,t=[];return Object.keys(this.leafNodesById).forEach(function(n){Object.prototype.hasOwnProperty.call(e.leafNodesById,n)&&(1!==e.leafNodesById[n].status&&2!==e.leafNodesById[n].status||t.push(n))}),t}},{key:"setValues",value:function(e){var t=this;this.emptyNodesCheckStatus(),e.forEach(function(e){t.setValue(e)}),this.updateLiElements();var n=this.options.onChange;n&&n.call(this)}},{key:"setDisable",value:function(e){var t=this.nodesById[e];t&&(t.disabled||(t.disabled=!0,this.markWillUpdateNode(t),this.walkUp(t,"disabled"),this.walkDown(t,"disabled")))}},{key:"getDisables",value:function(){var e=this,t=[];return Object.keys(this.leafNodesById).forEach(function(n){Object.prototype.hasOwnProperty.call(e.leafNodesById,n)&&e.leafNodesById[n].disabled&&t.push(n)}),t}},{key:"setDisables",value:function(e){var t=this;this.emptyNodesDisable(),e.forEach(function(e){t.setDisable(e)}),this.updateLiElements()}},{key:"emptyNodesCheckStatus",value:function(){this.willUpdateNodesById=this.getSelectedNodesById(),Object.values(this.willUpdateNodesById).forEach(function(e){e.disabled||(e.status=0)})}},{key:"emptyNodesDisable",value:function(){this.willUpdateNodesById=this.getDisabledNodesById(),Object.values(this.willUpdateNodesById).forEach(function(e){e.disabled=!1})}},{key:"getSelectedNodesById",value:function(){return Object.entries(this.nodesById).reduce(function(e,t){var n=i(t,2),r=n[0],o=n[1];return 1!==o.status&&2!==o.status||(e[r]=o),e},{})}},{key:"getDisabledNodesById",value:function(){return Object.entries(this.nodesById).reduce(function(e,t){var n=i(t,2),r=n[0],o=n[1];return o.disabled&&(e[r]=o),e},{})}},{key:"updateLiElements",value:function(){var e=this;Object.values(this.willUpdateNodesById).forEach(function(t){e.updateLiElement(t)}),this.willUpdateNodesById={}}},{key:"markWillUpdateNode",value:function(e){this.willUpdateNodesById[e.id]=e}},{key:"walkUp",value:function(e,t){var n=e.parent;if(n){if("status"===t){var r=null,o=n.children.reduce(function(e,t){return Number.isNaN(t.status)?e:e+t.status},0);if(r=o?o===2*n.children.length?2:1:0,n.status===r)return;n.status=r}else{var s=n.children.reduce(function(e,t){return e&&t.disabled},!0);if(n.disabled===s)return;n.disabled=s}this.markWillUpdateNode(n),this.walkUp(n,t)}}},{key:"walkDown",value:function(e,t){var n=this;e.children&&e.children.length&&e.children.forEach(function(r){"status"===t&&r.disabled||(r[t]=e[t],n.markWillUpdateNode(r),n.walkDown(r,t))})}},{key:"updateLiElement",value:function(e){var t=this.liElementsById[e.id].classList;switch(e.status){case 0:t.remove("treejs-node__halfchecked","treejs-node__checked");break;case 1:t.remove("treejs-node__checked"),t.add("treejs-node__halfchecked");break;case 2:t.remove("treejs-node__halfchecked"),t.add("treejs-node__checked")}switch(e.disabled){case!0:t.contains("treejs-node__disabled")||t.add("treejs-node__disabled");break;case!1:t.contains("treejs-node__disabled")&&t.remove("treejs-node__disabled")}}},{key:"collapseAll",value:function(){var e=this;Object.keys(this.leafNodesById).forEach(function(t){var n=e.leafNodesById[t];!function e(t,n){try{var r=t.liElementsById[n.parent.id];r.classList.contains("treejs-node__close")||r.getElementsByClassName("treejs-switcher")[0].click()}catch(e){return}Object.prototype.hasOwnProperty.call(n,"parent")&&e(t,n.parent)}(e,n)})}},{key:"expandAll",value:function(){!function e(t,n){var r=t.liElementsById[n.id];r.classList.contains("treejs-node__close")&&r.getElementsByClassName("treejs-switcher")[0].click(),Object.prototype.hasOwnProperty.call(n,"children")&&n.children.forEach(function(n){return e(t,n)})}(this,this.treeNodes[0])}}])&&a(t.prototype,n),s&&a(t,s),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={method:"GET",url:"",async:!0,success:null,failed:null,data:{},"Content-Type":"application/json; charset=utf-8"},n=Object.assign(t,e),r=new XMLHttpRequest,o=Object.entries(n.data).reduce(function(e,t){var n,r,o=(r=2,function(e){if(Array.isArray(e))return e}(n=t)||function(e,t){var n=[],r=!0,o=!1,s=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,s=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw s}}return n}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),s=o[0],i=o[1];return e.push("".concat(s,"=").concat(i)),e},[]).join("&");if("POST"===n.method.toUpperCase())r.open(n.method,n.url,n.async),r.setRequestHeader("Content-Type",n["Content-Type"]),r.send(o);else if("GET"===n.method.toUpperCase()){var s=n.url;o&&(s.indexOf("?"),s+="&".concat(o)),r.open(n.method,s,n.async),r.setRequestHeader("Content-Type",n["Content-Type"]),r.send(null)}r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var e=r.responseText;n["Content-Type"]===t["Content-Type"]&&(e=JSON.parse(e)),n.success&&n.success(e)}else n.failed&&n.failed(r.status)}}},function(e,t,n){"use strict";n.r(t);var r,o=n(3),s=n.n(o),i=n(4),a=n.n(i),d=0,l={injectType:"lazyStyleTag",insert:function(e,t){(t.target||document.head).appendChild(e)},singleton:!1},c={};c.locals=a.a.locals||{},c.use=function(){return d++||(r=s()(a.a,l)),c},c.unuse=function(){d>0&&!--d&&(r(),r=null)},t.default=c},function(e,t,n){"use strict";var r,o=function(){return"undefined"===typeof r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},s=function(){var e={};return function(t){if("undefined"===typeof e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function a(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function d(e,t){for(var n={},r=[],o=0;o<e.length;o++){var s=e[o],d=t.base?s[0]+t.base:s[0],l=n[d]||0,c="".concat(d," ").concat(l);n[d]=l+1;var u=a(c),f={css:s[1],media:s[2],sourceMap:s[3]};-1!==u?(i[u].references++,i[u].updater(f)):i.push({identifier:c,updater:b(f,t),references:1}),r.push(c)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if("undefined"===typeof r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach(function(e){t.setAttribute(e,r[e])}),"function"===typeof e.insert)e.insert(t);else{var i=s(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function f(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var s=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(s,i[t]):e.appendChild(s)}}var h=null,p=0;function b(e,t){var n,r,o;if(t.singleton){var s=p++;n=h||(h=l(t)),r=f.bind(null,n,s,!1),o=f.bind(null,n,s,!0)}else n=l(t),r=function(e,t,n){var r=n.css,o=n.media,s=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),s&&"undefined"!==typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"===typeof t.singleton||(t.singleton=o());var n=d(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=a(n[r]);i[o].references--}for(var s=d(e,t),l=0;l<n.length;l++){var c=a(n[l]);0===i[c].references&&(i[c].updater(),i.splice(c,1))}n=s}}}},function(e,t,n){(e.exports=n(5)(!1)).push([e.i,".treejs {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  font-size: 14px;\n  margin-left: -18px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.treejs *:after,\n.treejs *:before {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.treejs > .treejs-node {\n  padding-left: 0;\n}\n.treejs .treejs-nodes {\n  list-style: none;\n  padding-left: 18px;\n  margin: 0;\n  overflow: hidden;\n  -webkit-transition: height 150ms ease-out, opacity 150ms ease-out;\n  -o-transition: height 150ms ease-out, opacity 150ms ease-out;\n  transition: height 150ms ease-out, opacity 150ms ease-out;\n}\n.treejs .treejs-node {\n  cursor: pointer;\n  overflow: hidden;\n}\n.treejs .treejs-node.treejs-placeholder {\n  padding-left: 18px;\n}\n.treejs .treejs-switcher {\n  display: inline-block;\n  vertical-align: middle;\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  position: relative;\n  -webkit-transition: -webkit-transform 150ms ease-out;\n  transition: -webkit-transform 150ms ease-out;\n  -o-transition: transform 150ms ease-out;\n  transition: transform 150ms ease-out;\n  transition: transform 150ms ease-out, -webkit-transform 150ms ease-out;\n}\n.treejs .treejs-switcher:before {\n  position: absolute;\n  top: 8px;\n  left: 6px;\n  display: block;\n  content: ' ';\n  border: 4px solid transparent;\n  border-top: 4px solid rgba(245, 245, 245, 0.7);\n  -webkit-transition: border-color 150ms;\n  -o-transition: border-color 150ms;\n  transition: border-color 150ms;\n}\n.treejs .treejs-switcher:hover:before {\n  border-top: 4px solid rgba(245, 245, 245, 0.96);\n}\n.treejs .treejs-node__close > .treejs-switcher {\n  -webkit-transform: rotate(-90deg);\n      -ms-transform: rotate(-90deg);\n          transform: rotate(-90deg);\n}\n.treejs .treejs-node__close > .treejs-nodes {\n  height: 0;\n}\n.treejs .treejs-checkbox {\n  display: inline-block;\n  vertical-align: middle;\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  position: relative;\n}\n.treejs .treejs-checkbox:before {\n  -webkit-transition: all 0.3s;\n  -o-transition: all 0.3s;\n  transition: all 0.3s;\n  cursor: pointer;\n  position: absolute;\n  top: 2px;\n  content: ' ';\n  display: block;\n  width: 16px;\n  height: 16px;\n  border: 1px solid #d9d9d9;\n  border-radius: 2px;\n}\n.treejs .treejs-checkbox:hover:before {\n  -webkit-box-shadow: 0 0 2px 1px #1890ff;\n          box-shadow: 0 0 2px 1px #1890ff;\n}\n.treejs .treejs-node__checked > .treejs-checkbox:before {\n  background-color: #1890ff;\n  border-color: #1890ff;\n}\n.treejs .treejs-node__checked > .treejs-checkbox:after {\n  position: absolute;\n  content: ' ';\n  display: block;\n  top: 4px;\n  left: 5px;\n  width: 5px;\n  height: 9px;\n  border: 2px solid #fff;\n  border-top: none;\n  border-left: none;\n  -webkit-transform: rotate(45deg);\n      -ms-transform: rotate(45deg);\n          transform: rotate(45deg);\n}\n.treejs .treejs-node__halfchecked > .treejs-checkbox:before {\n  background-color: #1890ff;\n  border-color: #1890ff;\n}\n.treejs .treejs-node__halfchecked > .treejs-checkbox:after {\n  position: absolute;\n  content: ' ';\n  display: block;\n  top: 9px;\n  left: 3px;\n  width: 10px;\n  height: 2px;\n  background-color: #fff;\n}\n.treejs .treejs-node__disabled {\n  cursor: not-allowed;\n  color: rgba(255, 255, 255, 0.25);\n}\n.treejs .treejs-node__disabled .treejs-checkbox {\n  cursor: not-allowed;\n}\n.treejs .treejs-node__disabled .treejs-checkbox:before {\n  cursor: not-allowed;\n  border-color: #d9d9d9 !important;\n  background-color: #f5f5f5 !important;\n}\n.treejs .treejs-node__disabled .treejs-checkbox:hover:before {\n  -webkit-box-shadow: none !important;\n          box-shadow: none !important;\n}\n.treejs .treejs-node__disabled .treejs-node__checked > .treejs-checkbox:after {\n  border-color: #d9d9d9;\n}\n.treejs .treejs-node__disabled .treejs-node__halfchecked > .treejs-checkbox:after {\n  background-color: #d9d9d9;\n}\n.treejs .treejs-node__disabled.treejs-node__checked > .treejs-checkbox:after {\n  border-color: #d9d9d9;\n}\n.treejs .treejs-node__disabled.treejs-node__halfchecked > .treejs-checkbox:after {\n  background-color: #d9d9d9;\n}\n.treejs .treejs-label {\n  vertical-align: middle;\n}\n",""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"===typeof btoa){var o=(i=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),s=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(s).concat([o]).join("\n")}var i;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"===typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var s=this[o][0];"number"===typeof s&&(r[s]=!0)}for(o=0;o<e.length;o++){var i=e[o];"number"===typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}}]).default});
//# sourceMappingURL=tree.min.js.map